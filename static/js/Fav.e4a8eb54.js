(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Fav"],{"0688":function(e,t,i){"use strict";i("cf57")},"0ddf":function(e,t,i){},2298:function(e,t,i){},"281f":function(e,t,i){"use strict";i("e86c")},"41bf":function(e,t,i){"use strict";i("a41a")},8363:function(e,t,i){"use strict";var o=i("7a23"),n={class:"popup-title"},c={class:"footer"};function r(e,t,i,r,a,s){var l=Object(o["resolveComponent"])("van-field"),u=Object(o["resolveComponent"])("van-button"),d=Object(o["resolveComponent"])("van-form"),p=Object(o["resolveComponent"])("van-popup");return Object(o["openBlock"])(),Object(o["createBlock"])(p,{show:s.dialogVisible,"onUpdate:show":t[2]||(t[2]=function(e){return s.dialogVisible=e}),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%",minHeight:"5rem"}},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("h3",n,Object(o["toDisplayString"])(e.$t("editRemark")),1),Object(o["createVNode"])(d,{class:"popup-content",onSubmit:s.onSubmit},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{modelValue:a.title,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.title=e}),label:"",placeholder:e.$t("maximum50characters"),clearable:"",rules:a.rules},null,8,["modelValue","placeholder","rules"]),Object(o["createElementVNode"])("div",c,[Object(o["createVNode"])(u,{class:"btn",type:"default",round:"",onClick:t[1]||(t[1]=function(e){return s.dialogVisible=!1})},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("cancel")),1)]})),_:1}),Object(o["createVNode"])(u,{class:"btn","native-type":"submit",type:"primary",round:""},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("confirm1")),1)]})),_:1})])]})),_:1},8,["onSubmit"])]})),_:1},8,["show"])}var a={name:"EditRemark",props:{visible:Boolean,confirmSubmit:Function,initRemark:String},emits:["update:visible","onSubmit"],data:function(){var e=function(e){return(null===e||void 0===e?void 0:e.length)<=50};return{title:this.initRemark||"",rules:[{required:!1,message:this.$t("enterRemark")},{validator:e,message:this.$t("maximum50characters")}]}},computed:{dialogVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},watch:{visible:function(e){e&&(this.title=this.initRemark||"")}},methods:{onSubmit:function(){this.confirmSubmit(this.title)}}},s=(i("a70d"),i("6b0d")),l=i.n(s);const u=l()(a,[["render",r],["__scopeId","data-v-209dff29"]]);t["a"]=u},a41a:function(e,t,i){},a70d:function(e,t,i){"use strict";i("2298")},b3ae:function(e,t,i){"use strict";i("0ddf")},cf57:function(e,t,i){},d51a:function(e,t,i){"use strict";i.r(t);i("b0c0");var o=i("7a23"),n=function(e){return Object(o["pushScopeId"])("data-v-84ac6f6e"),e=e(),Object(o["popScopeId"])(),e},c={class:"fav-tabs-container"},r={key:0,class:"tag"},a=n((function(){return Object(o["createElementVNode"])("i",{class:"iconfont icon-edit"},null,-1)}));function s(e,t,i,n,s,l){var u=Object(o["resolveComponent"])("van-tab"),d=Object(o["resolveComponent"])("van-tabs"),p=Object(o["resolveComponent"])("router-link"),b=Object(o["resolveComponent"])("van-sticky"),f=Object(o["resolveComponent"])("favorite-list"),m=Object(o["resolveComponent"])("favorite-list-old"),h=Object(o["resolveComponent"])("nft-favorite-list");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createVNode"])(b,{position:"top","offset-top":"1.2rem"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",c,[Object(o["createVNode"])(d,{class:"fav-tabs",active:s.activeGroup,"onUpdate:active":t[0]||(t[0]=function(e){return s.activeGroup=e}),color:"#558BED",ellipsis:!1,background:"transparent"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(l.groups,(function(t,i){return Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:i,title:0!==t.group_id?t.name:e.$t("defaultGroup"),name:t.id},{title:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(0!==t.group_id?t.name:e.$t("defaultGroup"))+" ",1),"nft"===t.type?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",r,"nft")):Object(o["createCommentVNode"])("",!0)]})),_:2},1032,["title","name"])})),128))]})),_:1},8,["active"]),Object(o["createVNode"])(p,{class:"btn-manage",to:{name:"FavoriteManage",params:{id:"1",type:l.activeType}}},{default:Object(o["withCtx"])((function(){return[a]})),_:1},8,["to"])])]})),_:1}),"1"!==l.activeType||l.isFavSupportV2?"1"===l.activeType&&l.isFavSupportV2?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:1,tableList:s.favoritesList,isFavorites:"",activeGroup:l.activeGroupId,onRefresh:l.handleRefresh,onLoadMore:l.handleLoadMore},null,8,["tableList","activeGroup","onRefresh","onLoadMore"])):Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(f,{key:0,tableList:s.favoritesList,isFavorites:"",activeGroup:l.activeGroupId,onRefresh:l.handleRefresh,onLoadMore:l.handleLoadMore},null,8,["tableList","activeGroup","onRefresh","onLoadMore"])),"2"===l.activeType?(Object(o["openBlock"])(),Object(o["createBlock"])(h,{key:2,tableList:s.nftFavoritesList,isFavorites:!1,activeGroup:l.activeGroupId,onRefresh:l.getUserNftFavorites},null,8,["tableList","activeGroup","onRefresh"])):Object(o["createCommentVNode"])("",!0)],64)}var l=i("2909"),u=i("1da1"),d=i("5530"),p=(i("96cf"),i("4de4"),i("d3b7"),i("a9e3"),i("ac1f"),i("1276"),i("d81d"),i("7db0"),i("99af"),i("901e")),b=i.n(p),f=i("365c"),m={class:"table w-fav"},h={class:"table-list"},v={class:"table-item table-header"},g={class:"table-item_d flex-start"},O={class:"icon-sort-container"},j={class:"icon-sort-container"},k=["onClick","onTouchstart"],y={class:"token-info table-item_d"},$={class:"icon-token-container"},S=["src"],w={class:"token-symbol"},_={class:"van-ellipsis",style:{"max-width":"100px"}},C=["onClick"],B={class:"table-item_d"},N={class:"table-item_d"};function V(e,t,n,c,r,a){var s=this,l=Object(o["resolveComponent"])("loading"),u=Object(o["resolveComponent"])("van-sticky"),d=Object(o["resolveComponent"])("van-image"),p=Object(o["resolveComponent"])("van-button"),b=Object(o["resolveComponent"])("van-popover"),f=Object(o["resolveComponent"])("van-list"),V=Object(o["resolveComponent"])("van-empty"),E=Object(o["resolveComponent"])("ChangeGroup"),L=Object(o["resolveComponent"])("EditRemark"),x=Object(o["resolveDirective"])("animation-trigger");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",m,[Object(o["createVNode"])(l,{active:a.isLoading,"onUpdate:active":t[0]||(t[0]=function(e){return a.isLoading=e}),"can-cancel":!1,loader:"dots",opacity:.2,backgroundColor:"#000",color:"#558BED","is-full-page":!1},null,8,["active","opacity"]),Object(o["createElementVNode"])("ul",h,[Object(o["createVNode"])(u,{position:"top","offset-top":"2.08rem"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("li",v,[Object(o["createElementVNode"])("div",g,Object(o["toDisplayString"])(e.$t("token")),1),Object(o["createElementVNode"])("div",{class:"table-item_d",onClick:t[2]||(t[2]=Object(o["withModifiers"])((function(){return a.toggleMode&&a.toggleMode.apply(a,arguments)}),["stop"]))},[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])("mcap"===r.currentMode?e.$t("mcap"):e.$t("price")),1),Object(o["createElementVNode"])("span",null,[Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["iconfont ml-4",{"icon-Mcap":"mcap"===r.currentMode,"icon-s":"price"===r.currentMode}]),style:{color:"#d4d4d4","font-size":"14px"}},null,2)]),Object(o["createElementVNode"])("div",{class:"flex-start",onClick:t[1]||(t[1]=Object(o["withModifiers"])((function(e){return a.switchSort("current_price_usd")}),["stop"]))},[Object(o["createElementVNode"])("div",O,[Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["iconfont icon-sort-up",{active:1===r.activeSort&&r.sortBy===("mcap"==s.currentMode?"mcap":"current_price_usd")}])},null,2),Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["iconfont icon-sort-down",{active:-1===r.activeSort&&r.sortBy===("mcap"==s.currentMode?"mcap":"current_price_usd")}])},null,2)])])]),Object(o["createElementVNode"])("div",{class:"table-item_d",onClick:t[5]||(t[5]=function(e){return a.switchSort("price_change")})},[Object(o["createElementVNode"])("span",null,"24h"+Object(o["toDisplayString"])(e.$t("change2")),1),Object(o["createElementVNode"])("div",j,[Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["iconfont icon-sort-up",{active:1===r.activeSort&&"price_change"===r.sortBy}]),onClick:t[3]||(t[3]=Object(o["withModifiers"])((function(e){r.activeSort=1,r.sortBy="price_change"}),["stop"]))},null,2),Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["iconfont icon-sort-down",{active:-1===r.activeSort&&"price_change"===r.sortBy}]),onClick:t[4]||(t[4]=Object(o["withModifiers"])((function(e){r.activeSort=-1,r.sortBy="price_change"}),["stop"]))},null,2)])])])]})),_:1}),Object(o["createVNode"])(f,{loading:r.listLoading,"onUpdate:loading":t[9]||(t[9]=function(e){return r.listLoading=e}),error:r.listError,"onUpdate:error":t[10]||(t[10]=function(e){return r.listError=e}),finished:r.finished,"error-text":e.$t("errorText"),"loading-text":e.$t("loading"),"finished-text":e.$t("noMore"),onLoad:a.onLoad,offset:"100","immediate-check":!1},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(a.tableListSort,(function(n){return Object(o["openBlock"])(),Object(o["createBlock"])(b,{key:n.id,show:r.showPopover[n.id],"onUpdate:show":function(e){return r.showPopover[n.id]=e},actions:a.actions(n.id),theme:"dark",trigger:"click",overlay:"","overlay-style":{"background-color":"transparent"},onSelect:function(e){return a.onSelect(n,e)}},{reference:Object(o["withCtx"])((function(){var c;return[Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{class:"table-item",onClick:Object(o["withModifiers"])((function(e){return a.tableRowClick(n)}),["stop","prevent"]),onContextmenu:t[6]||(t[6]=Object(o["withModifiers"])((function(){}),["prevent"])),onTouchstart:function(e){return a.longTap(n)},onTouchmove:t[7]||(t[7]=function(){return a.clearTouch&&a.clearTouch.apply(a,arguments)}),onTouchend:t[8]||(t[8]=function(){return a.clearTouch&&a.clearTouch.apply(a,arguments)})},[Object(o["createElementVNode"])("div",y,[Object(o["createElementVNode"])("div",$,[(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:n.token+n.network,round:"",width:"0.5rem",height:"0.5rem","icon-size":"0.5rem","lazy-load":"","show-loading":"",src:e.$f.formatIcon(n),"error-icon":e.$f.formatDefaultIcon(n)},null,8,["src","error-icon"])),n.network?(Object(o["openBlock"])(),Object(o["createElementBlock"])("img",{key:0,class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(n.network,".png"),alt:"",srcset:""},null,8,S)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",w,[Object(o["createElementVNode"])("span",_,Object(o["toDisplayString"])(n.symbol),1),null!==n&&void 0!==n&&n.issue_platform?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:0,style:{display:"inline-block","margin-bottom":"-0.02rem"},round:"",width:"0.2rem",height:"0.2rem","icon-size":"0.2rem","lazy-load":"","show-loading":"",src:"".concat(e.$store.state.s3BaseUrl,"signals/").concat(n.issue_platform,".png"),"error-icon":i("aeccf")},null,8,["src","error-icon"])):Object(o["createCommentVNode"])("",!0),Array.isArray(null===n||void 0===n?void 0:n.badges)&&(null===n||void 0===n||null===(c=n.badges)||void 0===c?void 0:c.length)>0?(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],{key:1},Object(o["renderList"])(null===n||void 0===n?void 0:n.badges,(function(t,n){return Object(o["openBlock"])(),Object(o["createBlock"])(d,{style:{"margin-left":"0rem"},round:"",width:"0.2rem",height:"0.2rem","icon-size":"0.2rem","lazy-load":"","show-loading":"",src:"".concat(e.$store.state.s3BaseUrl,"signals/").concat(t.tag,".png"),"error-icon":i("aeccf")},null,8,["src","error-icon"])})),256)):Object(o["createCommentVNode"])("",!0),n.remark?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:2,class:"btn-remark van-ellipsis",onClick:Object(o["withModifiers"])((function(e){return a.handleEditRemark(n)}),["stop","prevent"])},Object(o["toDisplayString"])(n.remark),9,C)):Object(o["createCommentVNode"])("",!0)])]),Object(o["createElementVNode"])("div",B," $"+Object(o["toDisplayString"])("mcap"==r.currentMode?e.$f.formatNumberS(n.mcap||0,2):e.$f.formatNumber2(n.current_price_usd||0,4)),1),Object(o["createElementVNode"])("div",N,[n.price_change&&n.price_change>=0?(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:0,class:"button-priceChange",color:e.$store.getters.upColor[3],style:Object(o["normalizeStyle"])({fontSize:e.$f.getTextWidth("+".concat(e.$f.formatNumberS(n.price_change||0,2),"%"))>=54?"0.22rem":"0.26rem"}),size:"mini"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])("+"+Object(o["toDisplayString"])(e.$f.formatNumberS(n.price_change||0,2))+"%",1)]})),_:2},1032,["color","style"])):(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:1,class:"button-priceChange",color:e.$store.getters.downColor[3],style:Object(o["normalizeStyle"])({fontSize:e.$f.getTextWidth("".concat(e.$f.formatNumberS(n.price_change||0,2),"%"))>=54?"0.22rem":"0.26rem"}),size:"mini"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$f.formatNumberS(n.price_change||0,2))+"%",1)]})),_:2},1032,["color","style"]))])],40,k)),[[x,n.current_price_usd,"animation-bg"]])]})),_:2},1032,["show","onUpdate:show","actions","onSelect"])})),128))]})),_:1},8,["loading","error","finished","error-text","loading-text","finished-text","onLoad"]),Object(o["withDirectives"])(Object(o["createVNode"])(V,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[o["vShow"],a.tableListSort&&0===a.tableListSort.length&&!n.loading]])]),Object(o["createVNode"])(E,{visible:r.visible,"onUpdate:visible":t[11]||(t[11]=function(e){return r.visible=e}),selected:a.curGroup,"onUpdate:selected":t[12]||(t[12]=function(e){return a.curGroup=e}),title:e.$t("pleaseSelectGroup"),groups:a.groups,onSelect:a.confirmSwitchGroup},null,8,["visible","selected","title","groups","onSelect"]),Object(o["createVNode"])(L,{visible:r.visible4,"onUpdate:visible":t[13]||(t[13]=function(e){return r.visible4=e}),initRemark:r.curRemark,confirmSubmit:a.confirmEditRemark},null,8,["visible","initRemark","confirmSubmit"])])}var E=i("ade3"),L=(i("fb6a"),i("4e82"),i("c740"),i("caad"),i("2532"),i("c3ff")),x=i("8363"),T=i("2c28"),G=i("af58"),R={name:"FavoriteList",props:{tableList:Array,loading:{type:Boolean,default:!1},activeGroup:{type:Number,default:0},isFavorites:{type:Boolean,default:!0}},emits:["update:activeGroup","refresh"],components:Object(E["a"])({ChangeGroup:L["a"],EditRemark:x["a"]},G["a"].name,G["a"]),data:function(){return{currentMode:Object(T["useStorage"])("currentMode","price"),showPopover:{},timer:null,listLoading:!1,listError:!1,finished:!1,list:[],selectedToken:{},visible:!1,activeSort:0,sortBy:"",visible4:!1,curRemark:"",curToken:{},pageSize:20,currentPage:1}},computed:{isLoading:function(){return this.loading},isFinished:function(){return this.finished},groups:function(){return this.$store.state.userFavoriteGroups},curGroup:{get:function(){return this.activeGroup},set:function(e){this.$emit("update:activeGroup",e)}},tableListSort:function(){var e=this;if(0===this.activeSort||""===this.sortBy)return this.tableList;var t=this.tableList.slice(0);return t.sort((function(t,i){return((t[e.sortBy]||0)-(i[e.sortBy]||0))*e.activeSort}))}},methods:{toggleMode:function(){"price"!=this.currentMode?"mcap"!=this.currentMode||(this.currentMode="price"):this.currentMode="mcap"},actions:function(e){var t,i,o,n,c=this.tableList.findIndex((function(t){return t.id===e}));return[{text:this.$t("top"),id:0,disabled:0===c},{text:this.$t("up"),id:null===(t=this.tableList)||void 0===t||null===(i=t[c-1])||void 0===i?void 0:i.id,disabled:0===c},{text:this.$t("down"),id:null===(o=this.tableList)||void 0===o||null===(n=o[c+1])||void 0===n?void 0:n.id,disabled:c===this.tableList.length-1},{text:this.$t("move"),id:"move",disabled:!1},{text:this.$t("remark"),id:"remark",disabled:!1},{text:this.$t("delete"),id:"delete",disabled:!1}]},tableRowClick:function(e){var t,i,o,n;"brc20"===e.chain||null!==e&&void 0!==e&&null!==(t=e.token)&&void 0!==t&&null!==(i=t.includes)&&void 0!==i&&i.call(t,"inscription")||null!==e&&void 0!==e&&null!==(o=e.token)&&void 0!==o&&null!==(n=o.includes)&&void 0!==n&&n.call(o,"(")||"runes"===e.chain?this.$router.push({name:"Brc",params:{type:"token",id:e.id}}):this.$router.push({name:"Token",params:{type:"token",id:e.id}})},longTap:function(e){var t=this;clearTimeout(this.timer),this.timer=setTimeout((function(){t.timer=null,t.showPopover[e.id]=!0}),800)},clearTouch:function(){this.timer&&clearTimeout(this.timer)},onSelect:function(e,t){var i=this;if(this.$f.verifyLogin())if("move"===t.id)this.switchGroup(e);else if("delete"===t.id)this.removeFavorite(e);else if("remark"===t.id)this.handleEditRemark(e);else if(0===t.id){var o=this.$toast.loading({forbidClick:!0,duration:0});Object(f["q"])(e.id,this.activeGroup).then((function(){i.$emit("refresh"),i.$notify({type:"success",message:i.$t("success")})})).catch((function(e){i.$notify({type:"danger",message:i.$t("fail")})})).finally((function(){o.clear()}))}else{var n=this.$toast.loading({forbidClick:!0,duration:0});Object(f["p"])(e.id,t.id,this.activeGroup).then((function(){i.$emit("refresh"),i.$notify({type:"success",message:i.$t("success")})})).catch((function(e){i.$notify({type:"danger",message:i.$t("fail")})})).finally((function(){n.clear()}))}},switchGroup:function(e){this.selectedToken=e,this.visible=!0},confirmSwitchGroup:function(e){var t=this;if(this.$f.verifyLogin())if(this.activeGroup!==e){var i=this.$toast.loading({forbidClick:!0,duration:0});Object(f["od"])(this.selectedToken.token+"-"+this.selectedToken.chain,e).then((function(){t.$emit("refresh"),t.$notify({type:"success",message:t.$t("success")}),t.visible=!1})).catch((function(e){t.$notify({type:"danger",message:t.$t("fail")})})).finally((function(){i.clear()}))}else this.visible=!1},removeFavorite:function(e){var t=this,i=this.$toast.loading({forbidClick:!0,duration:0});Object(f["sd"])(e.id).then((function(){t.$emit("refresh"),t.$store.dispatch("getUserFavorites"),t.$notify({type:"success",message:t.$t("success")}),t.visible1=!1})).catch((function(e){t.$notify({type:"danger",message:t.$t("fail")})})).finally((function(){i.clear()}))},switchSort:function(e){var t=e;if("current_price_usd"==e&&"mcap"==this.currentMode&&(t="mcap"),this.sortBy!==t)return this.sortBy=t,void(this.activeSort=1);this.activeSort++,this.activeSort>1&&(this.activeSort=-1)},handleEditRemark:function(e){this.curRemark=e.remark||"",this.curToken=e,this.visible4=!0},confirmEditRemark:function(e){var t=this;if(this.$f.verifyLogin()){var i=this.$toast.loading({forbidClick:!0,duration:0}),o=this.curToken.token+"-"+this.curToken.chain;Object(f["E"])(o,e).then((function(){t.$emit("refresh"),t.visible4=!1,t.$notify({type:"success",message:t.$t("success")})})).catch((function(e){t.$notify({type:"danger",message:t.$t("fail")})})).finally((function(){i.clear()}))}},onLoad:function(){var e=this;this.$emit("loadMore",{page:this.currentPage,pageSize:this.pageSize,callback:function(t,i){e.listLoading=!1,e.finished=!t,e.listError=i,t&&e.currentPage++}})},resetState:function(){this.finished=!1,this.listLoading=!1,this.currentPage=1}},deactivated:function(){this.resetState()}},F=(i("b3ae"),i("6b0d")),M=i.n(F);const D=M()(R,[["render",V],["__scopeId","data-v-f5f4c85a"]]);var U=D,z={class:"table"},P={class:"table-list"},I={class:"table-item table-header"},A={class:"table-item_d"},q={class:"icon-sort-container"},W={class:"icon-sort-container"},J=["onClick","onTouchstart"],H={class:"token-info table-item_d"},K={class:"icon-token-container"},Q=["src"],X={class:"token-symbol"},Y={class:"van-ellipsis",style:{"max-width":"100px"}},Z=["onClick"],ee={class:"table-item_d"},te={class:"table-item_d"};function ie(e,t,i,n,c,r){var a=Object(o["resolveComponent"])("loading"),s=Object(o["resolveComponent"])("van-image"),l=Object(o["resolveComponent"])("van-button"),u=Object(o["resolveComponent"])("van-popover"),d=Object(o["resolveComponent"])("van-list"),p=Object(o["resolveComponent"])("van-empty"),b=Object(o["resolveComponent"])("ChangeGroup"),f=Object(o["resolveComponent"])("EditRemark"),m=Object(o["resolveDirective"])("animation-trigger");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",z,[Object(o["createVNode"])(a,{active:r.isLoading,"onUpdate:active":t[0]||(t[0]=function(e){return r.isLoading=e}),"can-cancel":!1,loader:"dots",opacity:.2,backgroundColor:"#000",color:"#558BED","is-full-page":!1},null,8,["active","opacity"]),Object(o["createElementVNode"])("ul",P,[Object(o["createElementVNode"])("li",I,[Object(o["createElementVNode"])("span",A,Object(o["toDisplayString"])(e.$t("token")),1),Object(o["createElementVNode"])("div",{class:"table-item_d",onClick:t[3]||(t[3]=function(e){return r.switchSort("current_price_usd")})},[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("lastPrice"))+"($)",1),Object(o["createElementVNode"])("div",q,[Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["iconfont icon-sort-up",{active:1===c.activeSort&&"current_price_usd"===c.sortBy}]),onClick:t[1]||(t[1]=Object(o["withModifiers"])((function(e){c.activeSort=1,c.sortBy="current_price_usd"}),["stop"]))},null,2),Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["iconfont icon-sort-down",{active:-1===c.activeSort&&"current_price_usd"===c.sortBy}]),onClick:t[2]||(t[2]=Object(o["withModifiers"])((function(e){c.activeSort=-1,c.sortBy="current_price_usd"}),["stop"]))},null,2)])]),Object(o["createElementVNode"])("div",{class:"table-item_d",onClick:t[6]||(t[6]=function(e){return r.switchSort("price_change")})},[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("change")),1),Object(o["createElementVNode"])("div",W,[Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["iconfont icon-sort-up",{active:1===c.activeSort&&"price_change"===c.sortBy}]),onClick:t[4]||(t[4]=Object(o["withModifiers"])((function(e){c.activeSort=1,c.sortBy="price_change"}),["stop"]))},null,2),Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["iconfont icon-sort-down",{active:-1===c.activeSort&&"price_change"===c.sortBy}]),onClick:t[5]||(t[5]=Object(o["withModifiers"])((function(e){c.activeSort=-1,c.sortBy="price_change"}),["stop"]))},null,2)])])]),Object(o["createVNode"])(d,{loading:c.listLoading,"onUpdate:loading":t[10]||(t[10]=function(e){return c.listLoading=e}),error:c.listError,"onUpdate:error":t[11]||(t[11]=function(e){return c.listError=e}),finished:c.finished,"error-text":e.$t("errorText"),"loading-text":e.$t("loading"),"finished-text":e.$t("noMore"),onLoad:r.onLoad,offset:"100","immediate-check":!1},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(r.tableListSort,(function(i){return Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:i.id,show:c.showPopover[i.id],"onUpdate:show":function(e){return c.showPopover[i.id]=e},actions:r.actions(i.id),theme:"dark",trigger:"click",overlay:"","overlay-style":{"background-color":"transparent"},onSelect:function(e){return r.onSelect(i,e)}},{reference:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{class:"table-item",onClick:Object(o["withModifiers"])((function(e){return r.tableRowClick(i)}),["stop","prevent"]),onContextmenu:t[7]||(t[7]=Object(o["withModifiers"])((function(){}),["prevent"])),onTouchstart:function(e){return r.longTap(i)},onTouchmove:t[8]||(t[8]=function(){return r.clearTouch&&r.clearTouch.apply(r,arguments)}),onTouchend:t[9]||(t[9]=function(){return r.clearTouch&&r.clearTouch.apply(r,arguments)})},[Object(o["createElementVNode"])("div",H,[Object(o["createElementVNode"])("div",K,[(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:i.token+i.network,round:"",width:"0.5rem",height:"0.5rem","icon-size":"0.5rem","lazy-load":"","show-loading":"",src:e.$f.formatIcon(i),"error-icon":e.$f.formatDefaultIcon(i)},null,8,["src","error-icon"])),i.network?(Object(o["openBlock"])(),Object(o["createElementBlock"])("img",{key:0,class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(i.network,".png"),alt:"",srcset:""},null,8,Q)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",X,[Object(o["createElementVNode"])("span",Y,Object(o["toDisplayString"])(i.symbol),1),i.remark?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,class:"btn-remark van-ellipsis",onClick:Object(o["withModifiers"])((function(e){return r.handleEditRemark(i)}),["stop","prevent"])},Object(o["toDisplayString"])(i.remark),9,Z)):Object(o["createCommentVNode"])("",!0)])]),Object(o["createElementVNode"])("div",ee,Object(o["toDisplayString"])(e.$f.formatNumber2(i.current_price_usd||0)),1),Object(o["createElementVNode"])("div",te,[i.price_change&&i.price_change>=0?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,class:"button-priceChange",color:e.$store.getters.upColor[3],size:"mini"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])("+"+Object(o["toDisplayString"])(i.price_change||0)+"%",1)]})),_:2},1032,["color"])):(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:1,class:"button-priceChange",color:e.$store.getters.downColor[3],size:"mini"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(i.price_change||0)+"%",1)]})),_:2},1032,["color"]))])],40,J)),[[m,i.current_price_usd,"animation-bg"]])]})),_:2},1032,["show","onUpdate:show","actions","onSelect"])})),128))]})),_:1},8,["loading","error","finished","error-text","loading-text","finished-text","onLoad"]),Object(o["withDirectives"])(Object(o["createVNode"])(p,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[o["vShow"],r.tableListSort&&0===r.tableListSort.length&&!i.loading]])]),Object(o["createVNode"])(b,{visible:c.visible,"onUpdate:visible":t[12]||(t[12]=function(e){return c.visible=e}),selected:r.curGroup,"onUpdate:selected":t[13]||(t[13]=function(e){return r.curGroup=e}),title:e.$t("pleaseSelectGroup"),groups:r.groups,onSelect:r.confirmSwitchGroup},null,8,["visible","selected","title","groups","onSelect"]),Object(o["createVNode"])(f,{visible:c.visible4,"onUpdate:visible":t[14]||(t[14]=function(e){return c.visible4=e}),initRemark:c.curRemark,confirmSubmit:r.confirmEditRemark},null,8,["visible","initRemark","confirmSubmit"])])}var oe={name:"FavoriteList",props:{tableList:Array,loading:{type:Boolean,default:!1},activeGroup:{type:Number,default:0},isFavorites:{type:Boolean,default:!0}},emits:["update:activeGroup","refresh"],components:Object(E["a"])({ChangeGroup:L["a"],EditRemark:x["a"]},G["a"].name,G["a"]),data:function(){return{showPopover:{},timer:null,listLoading:!1,listError:!1,finished:!1,list:[],selectedToken:{},visible:!1,activeSort:0,sortBy:"",visible4:!1,curRemark:"",curToken:{},pageSize:20,currentPage:1}},computed:{isLoading:function(){return this.loading},isFinished:function(){return this.finished},groups:function(){return this.$store.state.userFavoriteGroups},curGroup:{get:function(){return this.activeGroup},set:function(e){this.$emit("update:activeGroup",e)}},tableListSort:function(){var e=this;if(0===this.activeSort||""===this.sortBy)return this.tableList;var t=this.tableList.slice(0);return t.sort((function(t,i){return((t[e.sortBy]||0)-(i[e.sortBy]||0))*e.activeSort}))}},methods:{actions:function(e){var t,i,o,n,c=this.tableList.findIndex((function(t){return t.id===e}));return[{text:this.$t("top"),id:0,disabled:0===c},{text:this.$t("up"),id:null===(t=this.tableList)||void 0===t||null===(i=t[c-1])||void 0===i?void 0:i.id,disabled:0===c},{text:this.$t("down"),id:null===(o=this.tableList)||void 0===o||null===(n=o[c+1])||void 0===n?void 0:n.id,disabled:c===this.tableList.length-1},{text:this.$t("move"),id:"move",disabled:!1},{text:this.$t("remark"),id:"remark",disabled:!1},{text:this.$t("delete"),id:"delete",disabled:!1}]},tableRowClick:function(e){var t,i,o,n;"brc20"===e.chain||null!==e&&void 0!==e&&null!==(t=e.token)&&void 0!==t&&null!==(i=t.includes)&&void 0!==i&&i.call(t,"inscription")||null!==e&&void 0!==e&&null!==(o=e.token)&&void 0!==o&&null!==(n=o.includes)&&void 0!==n&&n.call(o,"(")||"runes"===e.chain?this.$router.push({name:"Brc",params:{type:"token",id:e.id}}):this.$router.push({name:"Token",params:{type:"token",id:e.id}})},longTap:function(e){var t=this;clearTimeout(this.timer),this.timer=setTimeout((function(){t.timer=null,t.showPopover[e.id]=!0}),800)},clearTouch:function(){this.timer&&clearTimeout(this.timer)},onSelect:function(e,t){var i=this;if(this.$f.verifyLogin())if("move"===t.id)this.switchGroup(e);else if("delete"===t.id)this.removeFavorite(e);else if("remark"===t.id)this.handleEditRemark(e);else if(0===t.id){var o=this.$toast.loading({forbidClick:!0,duration:0});Object(f["q"])(e.id,this.activeGroup).then((function(){i.$emit("refresh"),i.$notify({type:"success",message:i.$t("success")})})).catch((function(e){i.$notify({type:"danger",message:i.$t("fail")})})).finally((function(){o.clear()}))}else{var n=this.$toast.loading({forbidClick:!0,duration:0});Object(f["p"])(e.id,t.id,this.activeGroup).then((function(){i.$emit("refresh"),i.$notify({type:"success",message:i.$t("success")})})).catch((function(e){i.$notify({type:"danger",message:i.$t("fail")})})).finally((function(){n.clear()}))}},switchGroup:function(e){this.selectedToken=e,this.visible=!0},confirmSwitchGroup:function(e){var t=this;if(this.$f.verifyLogin())if(this.activeGroup!==e){var i=this.$toast.loading({forbidClick:!0,duration:0});Object(f["od"])(this.selectedToken.token+"-"+this.selectedToken.chain,e).then((function(){t.$emit("refresh"),t.$notify({type:"success",message:t.$t("success")}),t.visible=!1})).catch((function(e){t.$notify({type:"danger",message:t.$t("fail")})})).finally((function(){i.clear()}))}else this.visible=!1},removeFavorite:function(e){var t=this,i=this.$toast.loading({forbidClick:!0,duration:0});Object(f["sd"])(e.id).then((function(){t.$emit("refresh"),t.$store.dispatch("getUserFavorites"),t.$notify({type:"success",message:t.$t("success")}),t.visible1=!1})).catch((function(e){t.$notify({type:"danger",message:t.$t("fail")})})).finally((function(){i.clear()}))},switchSort:function(e){if(this.sortBy!==e)return this.sortBy=e,void(this.activeSort=1);this.activeSort++,this.activeSort>1&&(this.activeSort=-1)},handleEditRemark:function(e){this.curRemark=e.remark||"",this.curToken=e,this.visible4=!0},confirmEditRemark:function(e){var t=this;if(this.$f.verifyLogin()){var i=this.$toast.loading({forbidClick:!0,duration:0}),o=this.curToken.token+"-"+this.curToken.chain;Object(f["E"])(o,e).then((function(){t.$emit("refresh"),t.visible4=!1,t.$notify({type:"success",message:t.$t("success")})})).catch((function(e){t.$notify({type:"danger",message:t.$t("fail")})})).finally((function(){i.clear()}))}},onLoad:function(){var e=this;this.$emit("loadMore",{page:this.currentPage,pageSize:this.pageSize,callback:function(t,i){e.listLoading=!1,e.finished=!t,e.listError=i,t&&e.currentPage++}})},resetState:function(){this.finished=!1,this.listLoading=!1,this.currentPage=1}},deactivated:function(){this.resetState()}};i("0688");const ne=M()(oe,[["render",ie],["__scopeId","data-v-0cfc2bd3"]]);var ce=ne,re=function(e){return Object(o["pushScopeId"])("data-v-d9ce4924"),e=e(),Object(o["popScopeId"])(),e},ae={class:"table"},se={class:"table-list"},le={class:"table-item table-header"},ue=re((function(){return Object(o["createElementVNode"])("span",{class:"table-item_d"},"NFT",-1)})),de={class:"icon-sort-container"},pe={class:"icon-sort-container"},be=["onClick","onTouchstart"],fe={class:"token-info table-item_d"},me={class:"icon-token-container"},he=["src"],ve={class:"token-symbol"},ge={class:"token-symbol van-multi-ellipsis--l2"},Oe=["onClick"],je={class:"table-item_d"},ke=Object(o["createTextVNode"])(" -- "),ye={class:"table-item_d"},$e=Object(o["createTextVNode"])(" -- ");function Se(e,t,n,c,r,a){var s,l=Object(o["resolveComponent"])("loading"),u=Object(o["resolveComponent"])("van-image"),d=Object(o["resolveComponent"])("van-button"),p=Object(o["resolveComponent"])("van-popover"),b=Object(o["resolveComponent"])("DynamicScrollerItem"),f=Object(o["resolveComponent"])("DynamicScroller"),m=Object(o["resolveComponent"])("van-empty"),h=Object(o["resolveComponent"])("ChangeGroup"),v=Object(o["resolveComponent"])("EditRemark");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ae,[Object(o["createVNode"])(l,{active:a.isLoading,"onUpdate:active":t[0]||(t[0]=function(e){return a.isLoading=e}),"can-cancel":!1,loader:"dots",opacity:.2,backgroundColor:"#000",color:"#558BED","is-full-page":!1},null,8,["active","opacity"]),Object(o["createElementVNode"])("ul",se,[Object(o["createElementVNode"])("li",le,[ue,Object(o["createElementVNode"])("div",{class:"table-item_d",onClick:t[3]||(t[3]=function(e){return a.switchSort("price")})},[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("lastPrice")),1),Object(o["createElementVNode"])("div",de,[Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["iconfont icon-sort-up",{active:1===r.activeSort&&"price"===r.sortBy}]),onClick:t[1]||(t[1]=Object(o["withModifiers"])((function(e){r.activeSort=1,r.sortBy="price"}),["stop"]))},null,2),Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["iconfont icon-sort-down",{active:-1===r.activeSort&&"price"===r.sortBy}]),onClick:t[2]||(t[2]=Object(o["withModifiers"])((function(e){r.activeSort=-1,r.sortBy="price"}),["stop"]))},null,2)])]),Object(o["createElementVNode"])("div",{class:"table-item_d",onClick:t[6]||(t[6]=function(e){return a.switchSort("price_change")})},[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("change")),1),Object(o["createElementVNode"])("div",pe,[Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["iconfont icon-sort-up",{active:1===r.activeSort&&"price_change"===r.sortBy}]),onClick:t[4]||(t[4]=Object(o["withModifiers"])((function(e){r.activeSort=1,r.sortBy="price_change"}),["stop"]))},null,2),Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["iconfont icon-sort-down",{active:-1===r.activeSort&&"price_change"===r.sortBy}]),onClick:t[5]||(t[5]=Object(o["withModifiers"])((function(e){r.activeSort=-1,r.sortBy="price_change"}),["stop"]))},null,2)])])]),(null===(s=a.tableListSort)||void 0===s?void 0:s.length)>0?(Object(o["openBlock"])(),Object(o["createBlock"])(f,{key:0,items:a.tableListSort,"min-item-size":30,"key-field":"id","page-mode":"",class:"scroller"},{default:Object(o["withCtx"])((function(n){var c=n.item,s=n.index,l=n.active;return[Object(o["createVNode"])(b,{item:c,active:l,"data-index":s},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{show:r.showPopover[c.id],"onUpdate:show":function(e){return r.showPopover[c.id]=e},actions:a.actions(c.id),theme:"dark",trigger:"click",overlay:"","overlay-style":{"background-color":"transparent"},onSelect:function(e){return a.onSelect(c,e)}},{reference:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("li",{class:"table-item",onClick:Object(o["withModifiers"])((function(e){return a.tableRowClick(c)}),["stop","prevent"]),onContextmenu:t[7]||(t[7]=Object(o["withModifiers"])((function(){}),["prevent"])),onTouchstart:function(e){return a.longTap(c)},onTouchmove:t[8]||(t[8]=function(){return a.clearTouch&&a.clearTouch.apply(a,arguments)}),onTouchend:t[9]||(t[9]=function(){return a.clearTouch&&a.clearTouch.apply(a,arguments)})},[Object(o["createElementVNode"])("div",fe,[Object(o["createElementVNode"])("div",me,[(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:s,round:"",width:"0.5rem",height:"0.5rem","icon-size":"0.5rem","lazy-load":"","show-loading":"",src:e.$f.formatImage(null===c||void 0===c?void 0:c.logo),"error-icon":i("aeccf")},null,8,["src","error-icon"])),null!==c&&void 0!==c&&c.network||null!==c&&void 0!==c&&c.chain?(Object(o["openBlock"])(),Object(o["createElementBlock"])("img",{key:0,class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat((null===c||void 0===c?void 0:c.network)||(null===c||void 0===c?void 0:c.chain),".png"),alt:"",srcset:""},null,8,he)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",ve,[Object(o["createElementVNode"])("span",ge,Object(o["toDisplayString"])(c.name),1),c.remark?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,class:"btn-remark van-ellipsis",onClick:Object(o["withModifiers"])((function(e){return a.handleEditRemark(c)}),["stop","prevent"])},Object(o["toDisplayString"])(c.remark),9,Oe)):Object(o["createCommentVNode"])("",!0)])]),Object(o["createElementVNode"])("div",je,[null!==c&&void 0!==c&&c.price_m?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$f.formatNumber2(null===c||void 0===c?void 0:c.price_m,3,10))+" "+Object(o["toDisplayString"])(null===c||void 0===c?void 0:c.token_symbol),1)],64)):null!==c&&void 0!==c&&c.floor_price_m?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$f.formatNumber2(null===c||void 0===c?void 0:c.floor_price_m,3,10))+" "+Object(o["toDisplayString"])(null===c||void 0===c?void 0:c.token_symbol),1)],64)):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:2},[ke],64))]),Object(o["createElementVNode"])("div",ye,[c.price_m?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[c.price_change&&c.price_change>=0?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:0,class:"button-priceChange",color:e.$store.getters.upColor[3],size:"mini"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])("+ "+Object(o["toDisplayString"])(c.price_change+"%"||!1),1)]})),_:2},1032,["color"])):(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:1,class:"button-priceChange",color:e.$store.getters.downColor[3],size:"mini"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(c.price_change+"%"||!1),1)]})),_:2},1032,["color"]))],64)):c.floor_price_m?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[c.floor_price_change&&c.floor_price_change>=0?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:0,class:"button-priceChange",color:e.$store.getters.upColor[3],size:"mini"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])("+ "+Object(o["toDisplayString"])(c.floor_price_change+"%"||!1),1)]})),_:2},1032,["color"])):(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:1,class:"button-priceChange",color:e.$store.getters.downColor[3],size:"mini"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(c.floor_price_change+"%"||!1),1)]})),_:2},1032,["color"]))],64)):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:2},[$e],64))])],40,be)]})),_:2},1032,["show","onUpdate:show","actions","onSelect"])]})),_:2},1032,["item","active","data-index"])]})),_:1},8,["items"])):Object(o["createCommentVNode"])("",!0),Object(o["withDirectives"])(Object(o["createVNode"])(m,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[o["vShow"],a.tableListSort&&0===a.tableListSort.length&&!a.isLoading||!a.tableListSort]])]),Object(o["createVNode"])(h,{visible:r.visible,"onUpdate:visible":t[10]||(t[10]=function(e){return r.visible=e}),selected:a.curGroup,"onUpdate:selected":t[11]||(t[11]=function(e){return a.curGroup=e}),title:e.$t("pleaseSelectGroup"),groups:a.groups,type:"2",onSelect:a.confirmSwitchGroup},null,8,["visible","selected","title","groups","onSelect"]),Object(o["createVNode"])(v,{visible:r.visible4,"onUpdate:visible":t[12]||(t[12]=function(e){return r.visible4=e}),initRemark:r.curRemark,confirmSubmit:a.confirmEditRemark},null,8,["visible","initRemark","confirmSubmit"])])}var we={name:"NFtList",props:{tableList:Array,loading:{type:Boolean,default:!1},activeGroup:{type:Number,default:0},isFavorites:{type:Boolean,default:!0},isVirtualScroller:{type:Boolean,default:!1}},emits:["update:activeGroup","refresh"],components:{ChangeGroup:L["a"],EditRemark:x["a"]},data:function(){return{activeSort:0,sortBy:"",selectedToken:{},visible:!1,showPopover:{},timer:null,curRemark:"",curToken:{},visible4:!1}},computed:{isLoading:function(){return this.loading},groups:function(){return this.$store.state.userNftFavoriteGroups},curGroup:{get:function(){return this.activeGroup},set:function(e){this.$emit("update:activeGroup",e)}},tableListSort:function(){var e=this;if(0===this.activeSort||""===this.sortBy)return this.tableList;var t=this.tableList.slice(0);return"price"===this.sortBy?t.sort((function(t,i){return(((null===t||void 0===t?void 0:t.price_m)||(null===t||void 0===t?void 0:t.floor_price_m)||0)-((null===i||void 0===i?void 0:i.price_m)||(null===i||void 0===i?void 0:i.floor_price_m)||0))*e.activeSort})):t.sort((function(t,i){return(((null===t||void 0===t?void 0:t.price_change)||(null===t||void 0===t?void 0:t.floor_price_change)||0)-((null===i||void 0===i?void 0:i.price_change)||(null===i||void 0===i?void 0:i.floor_price_change)||0))*e.activeSort}))}},methods:{actions:function(e){var t,i,o,n,c=this.tableList.findIndex((function(t){return t.id===e}));return[{text:this.$t("top"),id:0,disabled:0===c},{text:this.$t("up"),id:null===(t=this.tableList)||void 0===t||null===(i=t[c-1])||void 0===i?void 0:i.id,disabled:0===c},{text:this.$t("down"),id:null===(o=this.tableList)||void 0===o||null===(n=o[c+1])||void 0===n?void 0:n.id,disabled:c===this.tableList.length-1},{text:this.$t("move"),id:"move",disabled:!1},{text:this.$t("remark"),id:"remark",disabled:!1},{text:this.$t("delete"),id:"delete",disabled:!1}]},longTap:function(e){var t=this;clearTimeout(this.timer),this.timer=setTimeout((function(){t.timer=null,t.showPopover[e.id]=!0}),800)},clearTouch:function(){this.timer&&clearTimeout(this.timer)},onSelect:function(e,t){var i=this;if(this.$f.verifyLogin())if("move"===t.id)this.switchGroup(e);else if("delete"===t.id)this.removeNftFavorite(e);else if("remark"===t.id)this.handleEditRemark(e);else if(0===t.id){var o=this.$toast.loading({forbidClick:!0,duration:0});Object(f["v"])(e.id,this.activeGroup).then((function(){i.$emit("refresh"),i.$notify({type:"success",message:i.$t("success")})})).catch((function(e){i.$notify({type:"danger",message:i.$t("fail")})})).finally((function(){o.clear()}))}else{var n=this.$toast.loading({forbidClick:!0,duration:0});Object(f["u"])(e.id,t.id,this.activeGroup).then((function(e){i.$emit("refresh"),i.$notify({type:"success",message:i.$t("success")})})).catch((function(e){i.$notify({type:"danger",message:i.$t("fail")})})).finally((function(){n.clear()}))}},collect:function(e){this.$store.dispatch("collect",e)},tableRowClick:function(e){this.$router.push({name:"NFT",params:{id:e.id+"-"+e.chain},query:{floor:e.floor_price_m>0?1:0}})},switchGroup:function(e){this.selectedToken=e,this.visible=!0},confirmSwitchGroup:function(e){var t=this;if(this.$f.verifyLogin())if(this.activeGroup!==e){var i=this.$toast.loading({forbidClick:!0,duration:0});Object(f["pd"])(this.selectedToken.id,e).then((function(e){t.$emit("refresh"),t.$notify({type:"success",message:t.$t("success")}),t.visible=!1})).catch((function(e){t.$notify({type:"danger",message:t.$t("fail")})})).finally((function(){i.clear()}))}else this.visible=!1},removeNftFavorite:function(e){var t=this,i=this.$toast.loading({forbidClick:!0,duration:0});Object(f["wd"])(e.id).then((function(){t.$emit("refresh"),t.$store.dispatch("getUserFavorites"),t.$notify({type:"success",message:t.$t("success")}),t.visible1=!1})).catch((function(e){t.$notify({type:"danger",message:t.$t("fail")})})).finally((function(){i.clear()}))},switchSort:function(e){if(this.sortBy!==e)return this.sortBy=e,void(this.activeSort=1);this.activeSort++,this.activeSort>1&&(this.activeSort=-1)},handleEditRemark:function(e){this.curRemark=e.remark||"",this.curToken=e,this.visible4=!0},confirmEditRemark:function(e){var t=this;if(this.$f.verifyLogin()){var i=this.$toast.loading({forbidClick:!0,duration:0});Object(f["D"])(this.curToken.id,e).then((function(){t.$emit("refresh"),t.visible4=!1,t.$notify({type:"success",message:t.$t("success")})})).catch((function(e){t.$notify({type:"danger",message:t.$t("fail")})})).finally((function(){i.clear()}))}}}};i("281f");const _e=M()(we,[["render",Se],["__scopeId","data-v-d9ce4924"]]);var Ce=_e,Be={name:"Plate",components:{FavoriteList:U,NftFavoriteList:Ce,FavoriteListOld:ce},data:function(){return{active:this.$route.params.id||"1",Timer:null,loading:!1,activeGroup:"0-1",activeNftGroup:0,favoritesList:[],nftFavoritesList:[]}},computed:{isFavSupportV2:function(){return this.$store.state.isFavSupportV2},groups:function(){return(this.$store.state.userAllFavoriteGroups||[]).filter((function(e){return"token"===e.type}))},nftGroups:function(){return this.$store.state.userNftFavoriteGroups||[]},activeGroupId:function(){var e,t,i;return Number((null===(e=this.activeGroup)||void 0===e||null===(t=e.split)||void 0===t||null===(i=t.call(e,"-"))||void 0===i?void 0:i[0])||0)},activeType:function(){var e,t,i;return(null===(e=this.activeGroup)||void 0===e||null===(t=e.split)||void 0===t||null===(i=t.call(e,"-"))||void 0===i?void 0:i[1])||"1"}},watch:{"$store.state.signatureObj":{handler:function(){this.getUserFavoriteList()},deep:!0},activeGroup:function(){this.getUserFavoriteList()},activeNftGroup:function(){this.getUserFavoriteList()},groups:{handler:function(){this.activeGroup="0-1"},deep:!0},nftGroups:{handler:function(){this.activeNftGroup=0},deep:!0},"$store.state.currentAccount":function(e){e&&"Fav"===this.$route.name&&this.getUserFavoriteList()},"$store.state.ws.isConnected":function(e){var t;e&&((null===(t=this.$store.state.ws.multiPriceParams)||void 0===t?void 0:t.main.length)>0&&this.$store.dispatch("subMultiPrice"))},"$store.state.ws.multiPriceResult":function(e){var t=this.favoritesList.map((function(t){var i=e.find((function(e){return e.token_id===t.id}));return i?Object(d["a"])(Object(d["a"])({},t),{},{current_price_usd:i.price,price_change:i.price_change,direction:(null===i||void 0===i?void 0:i.direction)||"down"}):t}));this.favoritesList=t}},beforeRouteLeave:function(){this.$store.dispatch("unSubMultiPrice")},activated:function(){this.init()},methods:{init:function(){this.getUserFavoriteList()},handleLoadMore:function(e){this.getUserFavorites(e)},getUserFavoriteList:function(){"1"===this.activeType?this.getUserFavorites():"2"===this.activeType&&this.getUserNftFavorites()},handleRefresh:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function i(){var o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return o=null===e||void 0===e?void 0:e.callback,i.prev=1,i.next=4,t.getUserFavorites({page:1,pageSize:20});case 4:return i.prev=4,o&&o(),i.finish(4);case 7:case"end":return i.stop()}}),i,null,[[1,,4,7]])})))()},getMcapAmount:function(e){if(e.total||e.lock_amount||e.burn_amount||e.other_amount){var t=new b.a(e.total).minus(e.lock_amount).minus(e.burn_amount).minus(e.other_amount);return t.isLessThan(0)&&(t=new b.a(0)),t}return new b.a(0)},getUserFavorites:function(){var e=arguments,t=this;return Object(u["a"])(regeneratorRuntime.mark((function i(){var o,n,c,r,a,s,u;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return o=e.length>0&&void 0!==e[0]?e[0]:{page:1,pageSize:20,callback:null},i.prev=1,c=[],r=!1,i.prev=4,i.next=7,Object(f["xb"])(t.activeGroupId,o.page);case 7:c=i.sent,r=!1,i.next=16;break;case 11:return i.prev=11,i.t0=i["catch"](4),t.favoritesList=[],o.callback&&o.callback(!1,!0),i.abrupt("return");case 16:if(a=c.map((function(e){return Object(d["a"])(Object(d["a"])({},e),{},{tvlU:new b.a(e.base_token_reserve||0).multipliedBy(e.base_token_price_usd||0).toNumber(),mcap_amount:t.getMcapAmount(e),mcap:e.market_cap||t.getMcapAmount(e).multipliedBy(e.current_price_usd).toNumber(),id:e.token+"-"+e.chain,address:e.token,network:e.chain,priceChange24h:null!==e&&void 0!==e&&e.price_change?(null===e||void 0===e?void 0:e.price_change)/100:0,priceUSD:(null===e||void 0===e?void 0:e.current_price_usd)||0,collected:!0,price_change:"brc20"==(null===e||void 0===e?void 0:e.chain)?e.price_change_v2:e.price_change})})),1===o.page?t.favoritesList=a:t.favoritesList=[].concat(Object(l["a"])(t.favoritesList),Object(l["a"])(a)),s=null===(n=t.favoritesList)||void 0===n?void 0:n.map((function(e){return"".concat(e.token,"-").concat(e.chain)})),1!==o.page||0!==c.length){i.next=21;break}return i.abrupt("return");case 21:u=0!==a.length,o.callback&&o.callback(u,r),t.$store.commit("setWsState",{name:"multiPriceParams",value:Object(d["a"])(Object(d["a"])({},t.$store.state.ws.multiPriceParams),{main:s})}),t.$store.dispatch("subMultiPrice"),i.next=30;break;case 27:i.prev=27,i.t1=i["catch"](1),o.callback&&o.callback(!1,!0);case 30:case"end":return i.stop()}}),i,null,[[1,27],[4,11]])})))()},getUserNftFavorites:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(f["Rb"])(e.activeGroupId).catch(Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)}))));case 2:e.nftFavoritesList=t.sent;case 3:case"end":return t.stop()}}),t)})))()}}};i("41bf");const Ne=M()(Be,[["render",s],["__scopeId","data-v-84ac6f6e"]]);t["default"]=Ne},e86c:function(e,t,i){}}]);